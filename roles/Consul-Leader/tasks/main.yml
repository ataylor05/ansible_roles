---
- name: Unarchive Consul binary
  unarchive:
    src: https://releases.hashicorp.com/consul/{{ consul_version }}/consul_{{ consul_version }}_linux_amd64.zip
    dest: /usr/local/bin
    remote_src: yes

- name: Ensure group consul exists
  group:
    name: consul
    state: present

- name: Add the user consul and append to group consul
  user:
    name: consul
    group: consul
    append: yes